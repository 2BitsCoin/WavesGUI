<div class="create-order"
     w-i18n-ns="app.dex"
     ng-class="{expanded: $ctrl.step !== 0}"
     ng-if="$ctrl.amountBalance && $ctrl.priceBalance">
    <div class="body">

        <div class="making-order" ng-class="$ctrl.type">
            <div class="areas">
                <!-- todo @german rename expand -->
                <div class="area buy" ng-click="$ctrl.expand('buy')">
                    <div class="name headline-4 basic-700">BUY</div>
                </div>
                <div class="area sell" ng-click="$ctrl.expand('sell')">
                    <div class="name headline-4 basic-700">SELL</div>
                </div>
            </div>

            <div class="create-order-notification js-order-notification">
                <div ng-if="$ctrl.createOrderFailed">
                    <i></i>
                    <w-i18n>create.order.failed</w-i18n>
                </div>
                <div ng-if="!$ctrl.createOrderFailed">
                    <i></i>
                    <w-i18n>create.order.success</w-i18n>
                </div>
            </div>
            <!--<div class="order-types"></div>-->

            <div class="overflow-auto">
                <form class="fields" novalidate name="order">
                    <div class="amount">
                        <div class="split-half field-label">
                            <div class="caption-2 disabled-900"
                                 w-i18n="directives.createOrder.amountField"></div>
                            <div ng-if="$ctrl.type === 'buy'"
                                 ng-click="$ctrl.setMaxPrice()"
                                 class="caption-2 disabled-900 underline-dashed">
                                <w-balance money="$ctrl.priceBalance"></w-balance>&nbsp;{{$ctrl.priceBalance.asset.displayName}}
                            </div>
                            <div ng-if="$ctrl.type === 'sell'"
                                 ng-click="$ctrl.setMaxAmount()"
                                 class="caption-2 disabled-900 underline-dashed">
                                <w-balance money="$ctrl.amountBalance"></w-balance>&nbsp;{{$ctrl.amountBalance.asset.displayName}}
                            </div>
                        </div>

                        <w-input-container>
                            <div class="input-like tiny">
                                <w-input class="tiny embed no-validate-icons"
                                         type="text"
                                         w-validate
                                         w-validator-asset="{{$ctrl.amountBalance.asset}}"
                                         w-validator-lte="{{$ctrl.maxAmountBalance}}"
                                         w-validator-custom="{{$ctrl.canBuyOrder}}"
                                         w-validator-gt="0"
                                         name="amount"
                                         ng-model="$ctrl.amount"
                                         required></w-input>
                                <div class="asset-name-wrap">
                                    <div class="caption-2caption-2 disabled-500">{{$ctrl.amountDisplayName}}</div>
                                </div>
                            </div>

                            <w-input-error message="required">
                                <w-i18n>directives.createOrder.errors.required</w-i18n>
                            </w-input-error>
                            <w-input-error message="gt">
                                <w-i18n>directives.createOrder.errors.required</w-i18n>
                            </w-input-error>
                            <w-input-error message="precision">
                                <w-i18n params="{precision: $ctrl.amountBalance.asset.precision}">
                                    directives.createOrder.errors.precision
                                </w-i18n>
                            </w-input-error>
                            <w-input-error message="lte">
                                <w-i18n params="{name: $ctrl.amountBalance.asset.displayName}">
                                    directives.createOrder.errors.balance
                                </w-i18n>
                            </w-input-error>
                            <w-input-error message="custom">
                                <w-i18n params="{name: $ctrl.priceBalance.asset.displayName}">
                                    directives.createOrder.errors.balance
                                </w-i18n>
                            </w-input-error>
                        </w-input-container>
                    </div>

                    <div class="price">
                        <div class="split-half field-label">
                            <div class="caption-2 disabled-900" w-i18n="directives.createOrder.priceField"></div>
                            <div class="caption-2 disabled-900 flex">
                                <span class="underline-dashed"><w-i18n>directives.createOrder.bid</w-i18n></span>
                                <span class="underline-dashed"><w-i18n>directives.createOrder.ask</w-i18n></span>
                                <span class="underline-dashed"><w-i18n>directives.createOrder.last</w-i18n></span>
                            </div>
                        </div>

                        <w-input-container>
                            <div class="input-like tiny">
                                <w-input class="tiny embed no-validate-icons"
                                         type="text"
                                         w-validate
                                         w-validator-asset="{{$ctrl.priceBalance.asset}}"
                                         w-validator-gt="0"
                                         name="price"
                                         ng-model="$ctrl.price"
                                         required></w-input>
                                <div class="asset-name-wrap">
                                    <div class="caption-1 disabled-500">{{$ctrl.priceDisplayName}}</div>
                                </div>
                            </div>
                            <w-input-error message="precision">
                                <w-i18n params="{precision: $ctrl.priceBalance.asset.precision}">
                                    directives.createOrder.errors.precision
                                </w-i18n>
                            </w-input-error>
                            <w-input-error message="gt">
                                <w-i18n>directives.createOrder.errors.required</w-i18n>
                            </w-input-error>
                            <w-input-error message="required">
                                <w-i18n>directives.createOrder.errors.required</w-i18n>
                            </w-input-error>
                        </w-input-container>
                    </div>


                    <div class="total">
                        <w-input-container>
                            <div class="field-label caption-2 disabled-900"
                                 w-i18n="directives.createOrder.total"></div>
                            <div class="input-like tiny">
                                <w-input class="tiny embed no-validate-icons"
                                         type="text"
                                         name="total"
                                         ng-model="$ctrl.totalPrice"

                                         required></w-input>
                                <div class="asset-name-wrap">
                                    <div class="caption-1 disabled-500">{{$ctrl.priceDisplayName}}</div>
                                </div>
                            </div>
                            <!--w-input-error message="">  <!-- todo validation @german -->
                            <!--w-i18n></w-i18n-->
                            <!--/w-input-error---->
                        </w-input-container>
                    </div>

                    <div class="split-half field-fee">
                        <div class="caption-2 disabled-600">Fee 0.003 WAVES</div>
                        <div class="caption-2 disabled-600 flex">
                        <span>
                            <w-i18n>directives.createOrder.expiration</w-i18n>
                        </span>
                            <span class="expiration underline basic-900 active">
                            <w-i18n>directives.createOrder.30days</w-i18n>
                            <div class="select-like">
                                <div class="option-like">
                                    <w-i18n>directives.createOrder.30days</w-i18n>
                                </div>
                                <div class="option-like">
                                    <w-i18n>directives.createOrder.60days</w-i18n>
                                </div>
                                <div class="option-like">
                                    <w-i18n>directives.createOrder.90days</w-i18n>
                                </div>
                            </div>
                        </span>
                        </div>
                    </div>

                    <!-- todo @german -->
                    <!--span>&nbsp;{{$ctrl.totalPrice.toFormat($ctrl.priceBalance.asset.precision)}}</span-->

                    <w-button disabled="order.$invalid"
                              class="place-order small footnote-3"
                              on-click="$ctrl.createOrder(order)">
                        <w-i18n ng-if="$ctrl.type === 'sell'"
                                params="{name: $ctrl.amountBalance.asset.displayName}">
                            directives.createOrder.placeSellOrder
                        </w-i18n>
                        <w-i18n ng-if="$ctrl.type === 'buy'"
                                params="{name: $ctrl.amountBalance.asset.displayName}">
                            directives.createOrder.placeBuyOrder
                        </w-i18n>
                    </w-button>
                </form>
            </div>
        </div>

    </div>
</div>
