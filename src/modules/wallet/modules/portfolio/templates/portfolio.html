<div w-i18n-ns="app.wallet.portfolio">

    <div class="toolbar">
        <w-button class="interface" on-click="$ctrl.showSend()">
            <span class="btn-icon icon-send" w-i18n="send"></span>
        </w-button>
        <w-button class="interface" on-click="$ctrl.showQR()">
            <span class="btn-icon icon-qr" w-i18n="qr"></span>
        </w-button>

        <w-select ng-model="$ctrl.filter">
            <w-option value="active">
                All active ({{$ctrl.details.active.length || 0}})
            </w-option>
            <!--<w-option value="pinned">-->
                <!--Favorites ({{$ctrl.details.pinned.length}})-->
            <!--</w-option>-->
            <w-option value="spam">
                Spam ({{$ctrl.details.spam.length || 0}})
            </w-option>
        </w-select>
    </div>

    <w-smart-table data="$ctrl.balanceList" header-info="$ctrl.tableHeaders">
        <w-table-row ng-repeat="balance in $data track by balance.asset.id">
            <w-table-cell>
                <w-asset-logo class="margin-right-1" asset-id="{{::balance.asset.id}}" size="30"></w-asset-logo>
                {{::balance.asset.name}}
            </w-table-cell>
            <w-table-cell>
                <w-balance money="balance.available"></w-balance>
            </w-table-cell>
            <w-table-cell>
                <w-balance money="balance.inOrders"></w-balance>
            </w-table-cell>
            <w-table-cell>
                <w-exchange noUpdate balance="balance.available"></w-exchange>
            </w-table-cell>
            <w-table-cell>
                <w-change-rate asset-id="balance.asset.id"></w-change-rate>
                <div class="chart-wrap">
                    <w-asset-rate-chart no-update="::true" asset-id="::balance.asset.id"></w-asset-rate-chart>
                </div>
            </w-table-cell>
            <w-table-cell>
                <w-change24 asset-from="balance.asset.id"
                            asset-to="$ctrl.mirrorId"
                            no-update></w-change24>
                %
            </w-table-cell>
            <w-table-cell>
                <div class="portfolio-table__control-cell">
                    <span ui-sref="main.dex($ctrl.getSrefParams(balance.asset))">Dex!</span>
                    <span ng-click="$ctrl.showSend(balance.asset)">Send!</span>
                    <span ng-if="$ctrl.isDepositSupported(balance.asset)"
                          ng-click="$ctrl.showDeposit(balance.asset)">
                        Recive!
                    </span>
                    <span ng-if="::!$ctrl.isDepositSupported(balance.asset) && $ctrl.isSepaSupported(balance.asset)"
                          ng-click="$ctrl.showSepa(balance.asset)">
                        Recive!
                    </span>
                    <span ng-if="::balance.asset.id !== WavesApp.defaultAssets.WAVES"
                          ng-click="$ctrl.toggleSpam(balance.asset)">
                         Spam!
                    </span>
                    <w-actions>
                        <w-action ng-click="$ctrl.showAsset(balance.asset)">
                            <w-i18n>info</w-i18n>
                        </w-action>
                        <w-action ng-click="$ctrl.showSend(balance.asset)">
                            <w-i18n>send</w-i18n>
                        </w-action>
                        <w-action ng-if="$ctrl.isDepositSupported(balance.asset)"
                                  ng-click="$ctrl.showDeposit(balance.asset)">
                            <w-i18n>deposit</w-i18n>
                        </w-action>
                        <w-action
                                ng-if="::!$ctrl.isDepositSupported(balance.asset) && $ctrl.isSepaSupported(balance.asset)"
                                ng-click="$ctrl.showSepa(balance.asset)">
                            <w-i18n>deposit</w-i18n>
                        </w-action>
                        <w-action ng-if="::balance.asset.isMyAsset"
                                  ng-click="$ctrl.showBurn(balance.asset.id)">
                            <w-i18n>burn</w-i18n>
                        </w-action>
                        <w-action ng-if="::balance.asset.isMyAsset && balance.asset.reissuable"
                                  ng-click="$ctrl.showReissue(balance.asset.id)">
                            <w-i18n>reissue</w-i18n>
                        </w-action>
                    </w-actions>
                </div>
            </w-table-cell>
        </w-table-row>
    </w-smart-table>

</div>
